<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <script src="/Scripts/boot.js?v=$AppVersion" type="text/javascript"></script>
    <script src="/Scripts/PlatForm/ComTools.js?v=$AppVersion" type="text/javascript"></script>
    <script src="/Scripts/PlatForm/WebForm.js?v=$AppVersion" type="text/javascript"></script>
    <!--<script src="/PowerPlat/WorkFlow/js/FlowStatusSeries.js?v=$AppVersion" type="text/javascript"></script>
    <script src="/Scripts/PlatForm/WorkFlowForm.js?v=$AppVersion" type="text/javascript"></script>-->
    <script src="/Form/Init/$Model.data.FormId/$Model.data.FormState/$Model.data.KeyValue"></script>
    <script language="javascript" src="/Scripts/PlatForm/ControlCenter.js?v=$AppVersion "></script>
    <script language="javascript" src="/Scripts/PlatForm/WorkFlowsEnums.js?v=$AppVersion "></script>
    <script language="javascript" src="/Scripts/PlatForm/WorkFlowsForm.js?v=$AppVersion "></script>
    <script type="text/javascript" hasvelocity="true">
        var KeyValue = "$Model.data.KeyValue";
        var FormId = "$Model.data.FormId";
        var FormState = "$Model.data.FormState";
        var FormParams = $Model.data.FormParams;
    </script>
    <style>
        .mini-tabs-position-top .mini-tabs-scrollCt {
            background-color: transparent;
        }
    </style>
</head>
<body>
    <div class="row" style="height: 100%">
        <div class="portlet box blue" style="height: 100%">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-reorder"></i>项目团队组建
                </div>
                <!--基础数据定义-->
                $!WorkFlowButtons
                <div class="actions">
                    <div class="btn-group">
                        <!--<a class="mini-button blue" id="btnActive" onclick ="WorkFlowUtils.ActiveWorkFlow(this)" style="display:none"><i class="fa fa-save"></i>送审</a>-->
                        <a class="mini-button blue" id="SF_ProjectGroupEstablish.Save" onclick="PowerForm.OnBtnSave(this, false, FormParams)"><i class="fa fa-save"></i>保存</a><!--保存-->
                        <a class="mini-button blue" id="SF_ProjectGroupEstablish.Refresh" onclick="PowerForm.OnBtnRefresh(this)"><i class="fa fa-refresh"></i>刷新</a><!--刷新-->
                        <a class="mini-button blue" id="SF_ProjectGroupEstablish.CloseForm" onclick="PowerForm.OnBtnCloseForm(this)"><i class="fa fa-power-off"></i>关闭</a><!--关闭-->
                    </div>
                </div>
            </div>
            <div class="mini-fit">
                <div class="portlet-body" style="height: 100%;">
                    <div id="SF_ProjectGroupEstablish" class="form" style="margin-bottom:20px;">
                        <table class="table table-bordered">
                            <tr>
                                <td>
                                    单据编号
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish.Code" name="Code" class="mini-textbox" required="true" requirederrortext="编号不能为空" />
                                </td>
                                <td>
                                    状态
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish.Status" name="Status" class="mini-combobox" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    标题
                                </td>
                                <td colspan="3">
                                    <input id="SF_ProjectGroupEstablish.Title" name="Title" class="mini-textbox" />
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    项目名称
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish.ProjectName" name="ProjectName" textname="ProjectName" class="mini-buttonedit"
                                           emptytext="请选择项目..." onbuttonclick="PowerForm.OnBtnWizard(this)" allowinput="true" />
                                </td>
                                <td>项目地点</td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish.ProjectSite" name="ProjectSite" class="mini-textbox" readonly="readonly"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    项目开始
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish.ProjectStart" name="ProjectStart" class="mini-datepicker" readonly="readonly" />
                                </td>
                                <td>
                                    项目结束
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish.ProjectEnd" name="ProjectEnd" class="mini-datepicker" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    项目概况
                                </td>
                                <td colspan="3">
                                    <input id="SF_ProjectGroupEstablish.ProjectSituation" name="ProjectSituation" class="mini-textarea" height="70" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    录入人
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish" name="RegHumName" class="mini-textbox" readonly="readonly" />
                                </td>
                                <td>
                                    录入日期
                                </td>
                                <td>
                                    <input id="SF_ProjectGroupEstablish" name="RegDate" class="mini-datepicker" readonly="readonly" />
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="mini-fit">
                        <!--<div id="maintabs" class="mini-tabs" tabposition="top" tabalign="left" style="height: 100%;">
                            <div title='岗位/人员'>-->
                        <div class="mini-splitter" vertical="false" style="width: 100%; height: 100%;">
                            <div size="50%" showcollapsebutton="false">
                                <div class="mini-toolbar">
                                    <!--<a class="mini-button" iconcls="fa-plus" id="SF_ProjectGroupEstablish_dtl.AddTemplate" onclick="PowerForm.OnBtnWizard(this,false)">引用模板</a>-->
                                    <a class="mini-button" iconcls="fa-plus" id="SF_ProjectGroupEstablish_dtl.Add" onclick="PowerForm.OnBtnAdd(this)">新增</a><!--新增-->
                                    <a class="mini-button" iconcls="fa-trash-o" id="SF_ProjectGroupEstablish_dtl.Delete" onclick="PowerForm.OnBtnDel(this)">删除</a><!--删除-->
                                    <a class="mini-button" iconcls="fa-arrow-up" id="SF_ProjectGroupEstablish_dtl.MoveUp" onclick="PowerForm.OnBtnMoveUp(this)">上移</a><!--上移-->
                                    <a class="mini-button" iconcls="fa-arrow-down" id="SF_ProjectGroupEstablish_dtl.MoveDown" onclick="PowerForm.OnBtnMoveDown(this)">下移</a><!--下移-->
                                    <a class="mini-button" iconcls="fa-arrow-left" id="SF_ProjectGroupEstablish_dtl.MoveLeft" onclick="PowerForm.OnBtnMoveLeft(this)">左移</a>
                                    <a class="mini-button" iconcls="fa-arrow-right" id="SF_ProjectGroupEstablish_dtl.MoveRight" onclick="PowerForm.OnBtnMoveRight(this)">右移</a>
                                </div>
                                <div class="mini-fit">
                                    <div id="SF_ProjectGroupEstablish_dtl" class="mini-treegrid" style="height: 100%;" showtreeicon="false"
                                         treecolumn="name" idfield="Id" parentfield="ParentId" resultastree="false" allowresize="true"
                                         allowcelledit="true" allowcellselect="true" showpager="false" expandOnLoad="true">
                                        <div property="columns">
                                            <div type="indexcolumn"></div>
                                            <div name="name" field="PosiName">
                                                岗位<input property="editor" class="mini-textbox" style="width: 100%;" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div size="50%" showcollapsebutton="false">
                                <div class="mini-toolbar">
                                    <a class="mini-button" id="SF_ProjectGroupEstablish_list.AddForm" onclick="OnAddHuman(this)"><i class="fa fa-plus"></i>新增</a><!--新增-->
                                    <a class="mini-button" id="SF_ProjectGroupEstablish_list.Delete" onclick="PowerForm.OnBtnDel(this)"><i class="fa fa-trash-o"></i>删除</a><!--删除-->
                                </div>
                                <div class="mini-fit">
                                    <div id="SF_ProjectGroupEstablish_list" class="mini-datagrid" style="width: 100%; height: 100%;"
                                         idfield="Id" allowresize="true" showpager="false" allowcellselect="true">
                                        <div property="columns">
                                            <div type="indexcolumn" width="10"></div>
                                            <div field="JobNumber">工号</div>
                                            <div field="PersonName">人员</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--</div>
                        </div>-->
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var PowerForm = new WebForm();
            $(function () {
                PowerForm.Init();
            });

            //PowerForm.EventWizardData = function (e, data) {
            //    if (e.id == "PS_ProjectTeamEstablish_Posi.AddTemplate") {
            //        e.Next = false;
            //        var templateid = data[0].Id;
            //        var teamid = formconfig.KeyValue;
            //        $.ajax({
            //            url: "/Initiation/UsePosiTemplate",
            //            data: { projectteamid: teamid, templateid: templateid },
            //            type: "POST",
            //            success: function (text) {
            //                var o = mini.decode(text);
            //                if (o.success) {
            //                    mini.get("PS_ProjectTeamEstablish_Posi").loadList(o.data.value, "Id", "ParentId");
            //                    mini.get("PS_ProjectTeamEstablish_Posi").reload();
            //                }
            //                else
            //                    Power.ui.error(o.message, { timeout: 0, position: "center center", closeable: true });
            //            }
            //        })
            //    }
            //}
            function OnAddHuman(btn) {
                var row = mini.get("SF_ProjectGroupEstablish_dtl").getSelected();
                if (!row) {
                    Power.ui.warning("请先选择岗位");
                    return;
                }
                PowerForm.OnBtnWizard(btn, true)
            }
        </script>
</body>
</html>
