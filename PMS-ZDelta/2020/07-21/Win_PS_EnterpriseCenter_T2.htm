﻿<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>进度管理首页</title>
	<script src="/Scripts/boot.js?v=$AppVersion" type="text/javascript"></script>
	<script src="/Scripts/plugins/echarts/source/echarts.js" type="text/javascript"></script>
	<link rel="stylesheet" href="/Projects/Power.ZDelta/css/demo.css">
	<style type="text/css">
		*::-webkit-scrollbar {
			width: 8px;
			height: 8px;
			background-color: #fff;
		}

		*::-webkit-scrollbar-thumb {
			background-color: #ddd;
			border-radius: 8px;
			-webkit-box-shadow: inset 0 0 6px rgba(255, 255, 255, .3);
		}
	</style>
</head>

<body>
	<div class="row" style="margin-bottom:10px;">
		<div class="col-md-2">
			<div class="box">
				<div class="title"><span>进度对比</span></div>
				<div id="chart1" style="width:100%;height:250px;"></div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="box">
				<div class="title"><span>SPI</span></div>
				<div id="chart2" style="width:100%;height:250px;"></div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="box">
				<div class="title"><span>工期</span></div>
				<p class="chart-title">项目总工期<span class="fc-blue">825天</span>，已施工<span
						class="fc-blue">256天</span>，剩余工期<span class="fc-blue">569天</span></p>
				<div class="flex">
					<div id="chart3" style="width:33%;height:200px;"></div>
					<div id="chart4" style="width:33%;height:200px;"></div>
					<div id="chart5" style="width:33%;height:200px;"></div>
				</div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="box">
				<div class="title"><span>实际进度</span></div>
				<div class="flex" style="margin-top:40px;">
					<div style="width:30%;text-align:center;">累计</div>
					<div>
						<div class="line-box"><span class="fc-red" style="margin-left:40px;"><i class="fa fa-flag"
									aria-hidden="true"></i></span></div>
						<p class="details">1250/5680张</p>
					</div>
				</div>
				<div class="flex" style="margin-top:40px;">
					<div style="width:30%;text-align:center;">本月</div>
					<div>
						<div class="line-box"><span class="fc-red" style="margin-left:80px;"><i class="fa fa-flag"
									aria-hidden="true"></i></span></div>
						<p class="details">80/160张</p>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="box">
				<div class="title"><span>进度节点预警</span><a href="#" class="link">详情<i class="fa fa-angle-right"></i></a></div>
				<div id="chart6" style="width:100%;height:250px;"></div>
				<p class="chart-details"><span style="color:#1E88E5"><i class="fa fa-circle"></i></span>12个，<span
						style="color:#26C6DA"><i class="fa fa-circle"></i></span>8个</p>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-2">
			<div class="box" style="height:610px;">
				<div class="title"><span>本月进度考核排名</span><a href="#" class="link">详情<i class="fa fa-angle-right"></i></a></div>
				<div id="chart7" style="width:100%;height:570px;"></div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="box" style="height:310px;margin-bottom:10px;">
				<div class="title"><span>进展情况</span></div>
				<div class="box-pad" style="height: 268px;">
					<div id="datagrid1" class="mini-datagrid" showLoading="false"
					style="width: 100%;height: 100%;"
					url="/html/demo/data/data3.txt" multiSelect="true" showEmptyText="false"
					showfooter="false" showPager="false">
					<div property="columns">
						<div field="data1" name="data1" width="40" headeralign="center" align="center">
							红绿灯
						</div>
						<div field="data2" name="data2" width="50" headerAlign="center" align="center">
							标段
						</div>
						<div field="data3" name="data3" width="80" headeralign="center" align="center">
							计划开始
						</div>
						<div field="data4" name="data4" width="80" headeralign="center" align="center">
							计划完成
						</div>
						
						<div field="data7" name="data7" width="60" headeralign="center" align="center">
							一级控制点
						</div>
						<div field="data8" name="data7" width="60" headeralign="center" align="center">
							二级控制点
						</div>
						<div field="data9" name="data7" width="60" headeralign="center" align="center">
							延后天数
						</div>
						<div field="data5" name="data5" width="80" headeralign="center" align="center">
							计划完成
						</div>
						<div field="data6" name="data6" width="80" headeralign="center" align="center">
							实际完成
						</div>
					</div>
				</div>
				</div>
				
			</div>
		</div>
		<div class="col-md-4">
			<div class="box" style="height:310px;margin-bottom:10px;">
				<div class="title"><span>本月节点</span></div>
				<div class="box-pad" style="height: 265px;">
					<div id="datagrid2" class="mini-datagrid" showLoading="false"
					showColumns="false" style="width: 100%;height: 100%;"
					url="/html/demo/data/Data4.txt" multiSelect="true" showEmptyText="false"
					showfooter="false" showPager="false">
					<div property="columns">

						<div field="data2" name="data2" width="100" headerAlign="center" align="center">
							节点名称
						</div>
						<div field="data3" name="data3" width="80" headeralign="center" align="center">
							最晚完成日期
						</div>
						<div field="data1" name="data3" width="80" headeralign="center" align="center">
							最晚完成日期
						</div>
					</div>
				</div>
				</div>
				
			</div>
		</div>
		<div class="col-md-3">
			<div class="box" style="height:290px;">
				<div class="title"><span>本月出图计划</span><a href="#" class="link">详情<i class="fa fa-angle-right"></i></a></div>
				<div id="chart8" style="width:100%;height:250px;"></div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="box" style="height:290px;">
				<div class="title"><span>现场图片</span><a href="#" class="link">更多<i class="fa fa-angle-right"></i></a></div>
				<div class="box-pad" style="width:100%;height:248px;">
					<img src="/html/demo/1.png" style="width:100%;height:100%;" />
				</div>
				
			</div>
		</div>
		<div class="col-md-4">
			<div class="box" style="height:290px;">
				<div class="title"><span>本月供货计划</span><a href="#" class="link">详情<i class="fa fa-angle-right"></i></a></div>
				<div id="chart9" style="width:100%;height:250px;"></div>
			</div>
		</div>
	</div>

	<script>
		mini.parse();
		var grid1 = mini.get("datagrid1");
		grid1.load();
		grid1.on("drawcell", function (e) {
			var record = e.record,
				column = e.column,
				field = e.field,
				value = e.value;
			if (field == "data1") {
				if (e.value == "red") {
					e.cellHtml = "<span style='color:#f00;'><i class='fa fa-bell'></i></span>"
				} else if (e.value == "green") {
					e.cellHtml = "<span style='color:#51CF86;'><i class='fa fa-bell'></i></span>"
				} else if (e.value == "yellow") {
					e.cellHtml = "<span style='color:#ffcc00;'><i class='fa fa-bell'></i></span>"
				}
			}
			if (field == "data2") {
				e.cellHtml = "<a href='/html/demo/Win_PS_EnterpriseCenter_T3.html'>" + e.value + "</i>"
			}
			if (field == "data7") {
				e.cellHtml = "<a href='#'>" + e.value + "亿</i>"
			}

			if (field == "data5") {
				e.cellHtml = '<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:' + e.value + '%;"></div><p class="sr-txt">' + e.value + '%</p></div>'
			}
			if (field == "data6") {
				if (e.value >= "25") {
					e.cellHtml = '<div class="progress"><div class="progress-bar blue" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:' + e.value + '%;"></div><p class="sr-txt">' + e.value + '%</p></div>'
				} else if (e.value >= "30") {
					e.cellHtml = '<div class="progress"><div class="progress-bar yellow" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:' + e.value + '%;"></div><p class="sr-txt">' + e.value + '%</p></div>'
				} else if (e.value >= "10") {
					e.cellHtml = '<div class="progress"><div class="progress-bar red" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:' + e.value + '%;"></div><p class="sr-txt">' + e.value + '%</p></div>'
				} else {
					e.cellHtml = '<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:' + e.value + '%;"></div><p class="sr-txt">' + e.value + '%</p></div>'

				}
			}
		});

		var grid2 = mini.get("datagrid2");
		grid2.load();
		grid2.on("drawcell ", function (e) {
			var record = e.record,
				column = e.column,
				field = e.field,
				value = e.value;
			if (field == "data1") {
				e.cellHtml = "<span style='color:#51CF86;'><i class='fa fa-check-square'></i></span>"
			}
		});
		var option1 = {
			series: [
				{
					name: '进度对比',
					type: 'pie',
					//selectedMode: 'single',
					radius: ['42%', '50%'],
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 52.6,
							name: '实际进度',
							itemStyle: {
								normal: {
									label: {
										show: true,
										position: 'center',
										formatter: '{d}%',
										textStyle: {
											fontSize: '16',
											color: '#333',
										}
									},
									color: '#26C6DA'
								}
							}
						},
						{
							value: 47.4,
							name: '未完成进度',
							itemStyle: {
								normal: {
									color: '#f0f1f6'
								}
							}
						},

					]
				},
				{
					name: '进度对比',
					type: 'pie',
					radius: ['53%', '65%'],
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 60,
							name: '计划进度',
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 40,
							name: '未完成进度',
							itemStyle: {
								normal: {
									color: '#f0f1f6'
								}
							}
						},

					]
				}
			]
		};
		InitEChart("chart1", option1);

		var option2 = {
			tooltip: {
				formatter: '{a} <br/>{b} : {c}%'
			},
			series: [
				{
					name: 'SPI',
					type: 'gauge',
					splitNumber: 5,       // 分割段数，默认为5
					detail: { formatter: '{value}' },
					axisLine: {            // 坐标轴线  
						lineStyle: {       // 属性lineStyle控制线条样式  
							color: [[0.25, '#54BCD7'], [0.75, '#5A7BDE'], [1, '#51CF86']],
							width: 10
						}
					},
					splitLine: {
						length: 10
					},
					axisTick: {            // 坐标轴小标记
						show: true,        // 属性show控制显示与否，默认不显示
						splitNumber: 5,    // 每份split细分多少段
						length: 3,         // 属性length控制线长
						lineStyle: {       // 属性lineStyle控制线条样式
							color: '#eee',
							width: 1,
							type: 'solid'
						}
					},
					data: [{ value: 50 }],

				}
			]
		};
		InitEChart("chart2", option2);


		var option3 = {
			title: {
				text: '一级节点按时完成率',
				x: 'center',
				y: 150,
				itemGap: 20,
				textStyle: {
					color: '#444',
					fontFamily: '微软雅黑',
					fontSize: 13,
					fontWeight: '500'
				}
			},
			color: ['#26C6DA', '#f0f1f6'],
			series: [
				{
					name: '一级节点按时完成率',
					type: 'pie',
					center: ['50%', '45%'],
					radius: ['50%', '60%'],
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 85,
							name: '已完成',
							itemStyle: {
								normal: {
									label: {
										show: true,
										position: 'center',
										formatter: '{d}%',
										textStyle: {
											fontSize: '16',
											color: '#333',
										}
									},
								}
							}
						},
						{ value: 15, name: '未完成' }
					]
				}
			]
		}
		InitEChart("chart3", option3);

		var option4 = {
			title: {
				text: '二级节点按时完成率',
				x: 'center',
				y: 150,
				itemGap: 20,
				textStyle: {
					color: '#444',
					fontFamily: '微软雅黑',
					fontSize: 13,
					fontWeight: '500'
				}
			},
			color: ['#1E88E5', '#f0f1f6'],
			series: [
				{
					name: '二级节点按时完成率',
					type: 'pie',
					center: ['50%', '45%'],
					radius: ['50%', '60%'],
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 90,
							name: '已完成',
							itemStyle: {
								normal: {
									label: {
										show: true,
										position: 'center',
										formatter: '{d}%',
										textStyle: {
											fontSize: '16',
											color: '#333',
										}
									},
								}
							}
						},
						{ value: 10, name: '未完成' }
					]
				}
			]
		}
		InitEChart("chart4", option4);

		var option5 = {
			title: {
				text: '三级节点按时完成率',
				x: 'center',
				y: 150,
				itemGap: 20,
				textStyle: {
					color: '#444',
					fontFamily: '微软雅黑',
					fontSize: 13,
					fontWeight: '500'
				}
			},
			color: ['#51CF86', '#f0f1f6'],
			series: [
				{
					name: '三级节点按时完成率',
					type: 'pie',
					center: ['50%', '45%'],
					radius: ['50%', '60%'],
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 79,
							name: '已完成',
							itemStyle: {
								normal: {
									label: {
										show: true,
										position: 'center',
										formatter: '{d}%',
										textStyle: {
											fontSize: '16',
											color: '#333',
										}
									},
								}
							}
						},
						{ value: 21, name: '未完成' }
					]
				}
			]
		}
		InitEChart("chart5", option5);

		var option6 = {
			color: ['#1E88E5', '#26C6DA'],
			series: [
				{
					name: '自开工累计',
					type: 'pie',
					center: ['50%', '50%'],
					radius: '60%',
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 12,
							name: '整改率',
						},
						{ value: 8, name: '未整改率' }
					]
				}
			]
		}
		InitEChart("chart6", option6);

		var option7 = {
			tooltip: {
				trigger: 'axis',
				axisPointer: {
					type: 'shadow'
				}
			},
			grid: {
				borderWidth: 0,
				x: 60,
				x2: 40,
				y: 20,
				y2: 30
			},
			xAxis: {
				type: 'value',
				axisLine: {
					lineStyle: {
						color: '#666',
						width: 1,//这里是为了突出显示加上的
					}
				},
				boundaryGap: [0, 0.01],
				show: false,
			},
			yAxis: {
				type: 'category',
				axisLine: {
					lineStyle: {
						color: '#666',
						width: 1,//这里是为了突出显示加上的
					}
				},
				data: ['C3标', 'C1标', 'B4标', 'B3标', 'B2标', 'B1标', 'A7标', 'A6标', 'A5标', 'A4标', 'A3标', 'A2标', 'A1标']
			},
			series: [
				{
					name: '2020年',
					type: 'bar',
					barMaxWidth: 10,//柱子最大宽度
					data: [
						{
							value: 40,
							itemStyle: {
								normal: {
									color: '#51CF86'
								}
							}
						},
						{
							value: 50,
							itemStyle: {
								normal: {
									color: '#51CF86'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#51CF86'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#51CF86'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#1E88E5'
								}
							}
						},
						{
							value: 60,
							itemStyle: {
								normal: {
									color: '#26C6DA'
								}
							}
						},
						{
							value: 63,
							itemStyle: {
								normal: {
									color: '#26C6DA'
								}
							}
						},
						{
							value: 65,
							itemStyle: {
								normal: {
									color: '#26C6DA'
								}
							}
						},
					]
				}
			]
		};
		InitEChart("chart7", option7);

		var option8 = {
			tooltip: {
				trigger: 'axis'
			},
			legend: {
				data: ['需求', '出图'],
				padding: 15,
				y: 'top'
			},
			grid: {
				borderWidth: 0,
				x: 60,
				x2: 40,
				y: 40,
				y2: 40
			},
			xAxis: {
				type: 'category',
				splitLine: {
					show: false,
				},
				axisLine: {
					lineStyle: {
						color: '#666',
						width: 1,//这里是为了突出显示加上的
					}
				},
				data: ['A2标', 'A3标', 'A4标', 'A5标', 'A6标', 'A7标']
			},
			yAxis: [{
				type: 'value',
				axisLine: {
					lineStyle: {
						color: '#666',
						width: 1,//这里是为了突出显示加上的
					}
				},
				splitLine: {
					show: true,
				},
			}],
			series: [
				{
					name: '需求',
					type: 'bar',
					itemStyle: {
						normal: {
							color: '#26C6DA'
						}
					},
					barMaxWidth: 5,//柱子最大宽度
					data: [15, 17, 27, 24, 34, 42,]
				},
				{
					name: '出图',
					type: 'bar',
					itemStyle: {
						normal: {
							color: '#1E88E5'
						}
					},
					barMaxWidth: 5,//柱子最大宽度
					data: [12, 18, 41, 33, 26, 45,]
				}
			]
		};
		InitEChart("chart8", option8);

		var option9 = {
			color: ['#26C6DA', '#40ea87', '#51CF86', '#5BAFE9','#1E88E5'],
			legend: {
				orient: 'vertical',
				x: 'right',
				y: 20,
				data: ['报需求', '招标中', '制造中', '运输中', '已到场']
			},
			series: [
				{
					name: '自开工累计',
					type: 'pie',
					center: ['50%', '50%'],
					radius: '60%',
					avoidLabelOverlap: false,
					itemStyle: {
						normal: {
							label: {
								show: false
							},
							labelLine: {
								show: false
							}
						}
					},
					data: [
						{
							value: 12, name: '报需求',
						},
						{ value: 5, name: '招标中' },
						{ value: 8, name: '制造中' },
						{ value: 18, name: '运输中' },
						{ value: 15, name: '已到场' }
					]
				}
			]
		}
		InitEChart("chart9", option9);
		function InitEChart(chartid, option) {
			require.config({
				paths: {
					echarts: '/Scripts/plugins/echarts/'
				}
			});
			require([
				'echarts',
				'echarts/theme/default',
				'echarts/chart/line',   // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表gauge
				'echarts/chart/bar',
				'echarts/chart/pie',
				'echarts/chart/gauge'
			], function (ec, theme) {
				var myChart = ec.init(document.getElementById(chartid), theme);

				// 图自动适应大小
				$(window).resize(function () {
					myChart.resize();
				});

				myChart.setOption(option);
			})
		}

	</script>
</body>

</html>

