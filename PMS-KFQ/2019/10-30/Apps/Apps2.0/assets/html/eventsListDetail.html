<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no,maximum-scale=1.0">
    <title> 客户信息详情 </title>
    <link href="../global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../global/plugins/icon-font-alibaba/iconfont.css" rel="stylesheet" type="text/css" />
    <link href="../global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../global/plugins/lCalendar-master/css/lCalendar.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../global/css/common.css" type="text/css">
</head>

<body>

    <!--nav tab切换导航  -- 开始-->
    <section class="customer-information">
        <div class="container">
            <ul class="clearFix contractMenu" id="contractMenu" role="tablist">
                <li role="presentation" class="active">
                    <a href="#baseMessage" aria-controls="home" role="tab" data-toggle="tab">基本信息</a>
                </li>

                <li role="presentation">
                    <a href="#relatedAccessory" aria-controls="messages" role="tab" data-toggle="tab">相关附件</a>
                </li>
            </ul>
        </div>
    </section>
    <!--nav tab切换导航  -- 结束-->

    <!-- Tab panes -->
    <!--tab content主体内容  --开始-->
    <section class="contract-body-content">
        <div class="container">
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="baseMessage">
                    <ul class="contract-unit-list">
                        <li>
                            <p>
                                <span class="contract-name">公司编号</span>
                                <span class="contract-nameValue" data-id="CompanyNumber" data-name="公司编号" data-value="">
                                    <input type="text" id="CompanyNumber"  class="eidt-input-box"  placeholder="输入公司编号">
                                </span>
                            </p>
                        </li>
                        <li>
                            <p>
                                <span class="contract-name">公司名称</span>
                                <span class="contract-nameValue" data-id="CompanyName" data-name="公司名称" data-value="">
                                    <input type="text" id="CompanyName"  class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">公司简称</span>
                                <span class="contract-nameValue" data-id="ShortName" data-name="公司简称" data-value="">
                                    <input type="text" id="ShortName" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">公司法人</span>
                                <span class="contract-nameValue" data-id="LegalPerson" data-name="公司法人" data-value="">
                                    <input type="text" id="LegalPerson" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>
                        <li>
                            <p>
                                <span class="contract-name">开户银行名称</span>
                                <span class="contract-nameValue" data-id="DepositBank" data-name="开户银行名称" data-value="">
                                    <input type="text" id="DepositBank" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">主要联系人</span>
                                <span class="contract-nameValue" data-id="MainContactPerson" data-name="主要联系人" data-value="">
                                    <input type="text" id="MainContactPerson"  class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">联系电话</span>
                                <span class="contract-nameValue" data-id="ContactNumber" data-name="联系电话" data-value="">
                                    <input type="text" id="ContactNumber" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">公司邮箱</span>
                                <span class="contract-nameValue" data-id="CompanyEmail" data-name="公司邮箱" data-value="">
                                    <input type="text" id="CompanyEmail" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">公司地址</span>
                                <span class="contract-nameValue" data-id="CompanyAddress" data-name="公司地址" data-value="">
                                    <input type="text" id="CompanyAddress" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">公司网址</span>
                                <span class="contract-nameValue" data-id="CompanyUrl" data-name="公司网址" data-value="">
                                    <input type="text" id="CompanyUrl" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">公司税号</span>
                                <span class="contract-nameValue" data-id="TaxMumber" data-name="公司税号" data-value="">
                                    <input type="text" id="TaxMumber" class="eidt-input-box"  placeholder="">
                                </span>
                            </p>
                        </li>

                        <li>
                            <p>
                                <span class="contract-name">录入时间</span>
                                <span class="contract-nameValue" data-id="RequireTime" data-name="录入时间" data-value="">
                                    <input id="RequireTime" class="eidt-input-box" type="text" readonly="" name="input_date"
                                           placeholder="录入日期" data-lcalendar="1990-01-11,2050-01-01" />
                                </span>
                            </p>
                        </li>

                    </ul>

                </div>

                <div role="tabpanel" class="tab-pane" id="relatedAccessory">
                    <ul class="related-accessory-content" id="AccessoryContent">
                        <li data-id="12342394u2394usdkwkf" data-name="贵阳.txt" data-ext=".txt">
                            <a href="">
                                <i class="icon iconfont icon-attachment font-color-blue"></i>
                                <span class="attachmentName"> 贵阳院会议纪要1 </span>
                            </a>
                            <span class="floatRight"> 2017-05-02 </span>
                        </li>


                    </ul>

                    <div class="btn-bottom-groups">

                        <div class="btn-control-content relatedAccessory-control" data-target="relatedAccessory">
                            <div class="btn-box-content">
                                <div class="btn-box pic-content">
                                    <p> <i class="icon iconfont icon-tupian font-color-blue"> </i> </p>
                                    <p> <span class="font-control">  图片 </span> </p>
                                </div>
                                <i class="add-btn icon iconfont icon-jia font-color-lightGreen">  </i>
                            </div>
                            <div class="btn-box-content">
                                <div class="btn-box video-content">
                                    <p> <i class="icon iconfont icon-shipin font-color-red"> </i> </p>
                                    <p> <span class="font-control">  视频 </span> </p>
                                </div>
                                <i class="add-btn icon iconfont icon-jia font-color-lightGreen">  </i>

                            </div>

                            <div class="btn-box-content">
                                <div class="btn-box audio-content">
                                    <p> <i class="icon iconfont icon-yinpin font-color-purple"> </i> </p>
                                    <p> <span class="font-control">  音频 </span> </p>
                                </div>
                                <i class="add-btn icon iconfont icon-jia font-color-lightGreen">  </i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>
    <!--tab content主体内容  --结束-->



    <script src="/Apps/Apps2.0/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="/Apps/Apps2.0/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/Apps/Apps2.0/assets/global/plugins/slider-pro-master/js/jquery.sliderPro.min.js" type="text/javascript"></script>
    <script src="/Apps/Apps2.0/assets/global/plugins/lCalendar-master/js/lCalendar.js" type="text/javascript"></script>
    <script src="/Apps/Apps2.0/assets/global/plugins/action-sheet/action-sheet.min.js" type="text/javascript"></script>
    <script src="/Apps/Common.js"></script>
    <script>
        $(function() {
            var baseMessage = {
                init: function() {
                    this.events();
                },
                //保存数据的方法
                saveData: function(className) {
                    var obj = {};
                    //获取保存的值
                    $("#baseMessage " + "." + className).each(function(a, b) {
                        var key = $(this).attr("data-id");
                        var value = $(this).attr("data-value");
                        obj[key] = value;
                    });

                    $.ajax({
                        url: "", //保存数据的后台接口
                        data: {
                            id: "",
                            saveData: obj,
                            KeyWord: "",
                            keyValue: ""
                        },
                        async: true, //使用异步
                        cache: false, //设置缓存禁用
                        success: function(data) {
                            // var result = JSON.parse(data);
                            // if (result.success == true) {
                            //     //这里可以写一个提示成功的动作，暂时用alert代替
                            //     alert("保存成功");
                            // } else {
                            //     //保存数据失败，把错误标注在提示里
                            //     alert("保存失败");
                            // }
                        }
                    });
                },

                //获取附件数据的方法
                getAttachmentData: function() {
                    var array = [];
                    //根据MobileWebForm.js里的写法
                    $.ajax({
                        url: "/Form/GetDocFiles",
                        data: {
                            BOKeyWord: "", //formconfig.config.joindata.KeyWord,
                            BOKeyValue: "", //formconfig.KeyValue,
                            select: "",
                            swhere: "",
                            sort: "",
                            index: 0,
                            size: 0
                        },
                        async: false, //不使用异步
                        cache: false, //设置缓存禁用,
                        success: function(data) {
                            // array = JSON.parse(data);
                        }
                    });
                    return array;
                },
                //获取附件数据后所使用的渲染引擎
                attachmentTmpl: function(data, id) {
                    if (data.length > 0) {
                        var i = 0,
                            html = '',
                            list;
                        for (; i < data.length; i++) {
                            list = data[i];
                            list.RegDate = list.RegDate.toString().split("T")[0];
                            html += '<li data-id=' + list.Id + ' data-name = ' + list.Name + list.d.FileExt + ' data-ext = ' + list.FileExt + '>' +
                                '<a href="">' +
                                '<i class="icon iconfont icon-attachment font-color-blue"></i>' +
                                '<span class="attachmentName"> ' + list.Name + list.d.FileExt + ' </span>' +
                                '</a>' +
                                '<span class="floatRight"> ' + list.RegDate + ' </span>' +
                                '</li>';
                        }

                        if (id) {
                            $("#" + id).html(html);
                        } else {
                            throw Error(" 渲染器没有设置id ");
                        }
                    } else {
                        return;
                    }
                },

                OpenView: function(id, title, fileext) {
                    if (title.toLowerCase().indexOf(".avi") > -1 ||
                        title.toLowerCase().indexOf(".mp4") > -1 ||
                        title.toLowerCase().indexOf(".mov") > -1) {
                        CallAppFunction("appPlayVideos", '{"fileid":"' + id + '","filename":"' + title + '"}', "", "");
                    } else {
                        var url = "/PowerPlat/FormXml/FileViewer.aspx?online=1&fileid=" + id;

                        CallAppFunction("appOpenNewWebView", '{"action":"openfile","fileext":"' +
                            fileext + '","url":"' + url + '","pullUp":"false","pullDown":"false","showTabbar":"false","title":"' +
                            title + '"}', url);
                    }
                },

                events: function() {
                    //给手机的安卓或者IOS开发者一个window对象，用来保存公司信息
                    //原来保存按钮在页面上，新版的"保存"按钮在导航条上
                    //调用这个方法的时候传递的参数是 "contract-nameValue"
                    window.companyMessage = this.saveData;

                    var requireTime = new lCalendar(),
                        attachmentTmpl = this.attachmentTmpl,
                        getAttachmentData = this.getAttachmentData,
                        openView = this.OpenView;

                    //期望完成日期
                    requireTime.init({
                        'trigger': '#RequireTime',
                        'type': 'date'
                    });

                    $(".eidt-input-box").on("change", function() {
                        var value = $.trim($(this).val()),
                            $this = $(this);
                        $this.parent().attr({
                            "data-value": value
                        });
                    });

                    $(".status-selected-units li").on("click", function() {
                        var $this = $(this),
                            value = $.trim($(this).text());
                        $this.addClass("active").siblings().removeClass("active")
                            .end().parent().prev()
                            .find(".contract-nameValue").text(value)
                            .attr({
                                "data-value": value
                            });
                        $this.parent().slideUp(function() {
                            $this.removeClass("active")
                        });
                    });

                    $(".status-selected-btn").on("click", function() {
                        var $this = $(this);
                        $this.next().slideToggle();
                    });

                    //渲染附件数据
                    attachmentTmpl(getAttachmentData, "AccessoryContent");


                    var showOpenCameraBtns = new ActionSheet({
                        buttons: {
                            '拍照': function(e) {
                                //在这里调打开摄像头的方法


                                this.hide();
                            },

                            '打开相册': function(e) {
                                //在这里调打开相册的方法


                                this.hide();
                            },
                        }
                    });

                    var showOpenVideosBtns = new ActionSheet({
                        buttons: {
                            '打开Video': function(e) {
                                //在这里调打开Video摄像头的方法


                                this.hide();
                            },

                            '打开Video库': function(e) {
                                //在这里调打开video库的方法


                                this.hide();
                            },
                        }
                    });

                    var showOpenAudiosBtns = new ActionSheet({
                        buttons: {
                            '打开Audio': function(e) {
                                //在这里调打开Audio的方法


                                this.hide();
                            },

                            '打开Audio库': function(e) {
                                //在这里调打开Audio库的方法


                                this.hide();
                            },
                        }
                    });

                    $(".pic-content").on("click", function() {
                        showOpenCameraBtns.show();
                    });

                    $(".video-content").on("click", function() {
                        showOpenVideosBtns.show();
                    });

                    $(".audio-content").on("click", function() {
                        showOpenAudiosBtns.show();
                    });

                    $("#AccessoryContent li").on("click", function(e) {
                        e.preventDefault();
                        var id = $(this).attr("data-id"),
                            title = $(this).attr("data-name"),
                            fileext = $(this).attr("data-ext");

                        openView(id, title, fileext);
                    });

                }
            };
            baseMessage.init();
        });
    </script>
</body>

</html>